{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Basic Meta -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Responsive -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Title -->
    <title>Teacher Login | {{ info.website_name }} – Secure Access</title>

    <!-- Meta Description -->
    <meta name="description"
        content="Secure teacher login portal for {{ info.website_name }}. Access the teacher dashboard using username, password, and OTP verification to manage classes, students, and academic activities safely.">

    <!-- SEO Keywords -->
    <meta name="keywords"
        content="teacher login, secure login, teacher panel, {{ info.website_name }}, tuition management system">

    <!-- Author -->
    <meta name="author" content="{{ info.website_name }}">

    <!-- Robots (CRITICAL – authentication page) -->
    <meta name="robots" content="noindex, nofollow, noarchive">

    <!-- Open Graph (Safe minimal preview) -->
    <meta property="og:title" content="Teacher Login | {{ info.website_name }}">
    <meta property="og:description"
        content="Secure teacher authentication portal for {{ info.website_name }}.">
    <meta property="og:image" content="{{ info.website_logo.url }}">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="{{ info.website_name }}">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Teacher Login | {{ info.website_name }}">
    <meta name="twitter:description"
        content="Secure teacher login page for {{ info.website_name }}.">
    <meta name="twitter:image" content="{{ info.website_logo.url }}">

    <!-- Canonical URL -->
    <link rel="canonical" href="{{ request.build_absolute_uri }}">

    <!-- Favicon -->
    <link rel="icon" href="{% static 'images/favicon.ico' %}?v=3" type="image/x-icon">
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background: #f5f7fa;
        min-height: 100vh;
        display: flex;
        position: relative;
        overflow-x: hidden;
      }

      body::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 100%;
        background: linear-gradient(
          135deg,
          #1e40af 0%,
          #3b82f6 50%,
          #60a5fa 100%
        );
        clip-path: polygon(0 0, 100% 0, 100% 60%, 0 100%);
        z-index: 0;
      }

      .login-wrapper {
        display: flex;
        width: 100%;
        max-width: 1400px;
        margin: auto;
        padding: 40px 20px;
        gap: 60px;
        align-items: center;
        position: relative;
        z-index: 1;
      }

      .left-section {
        flex: 1;
        color: white;
        padding: 40px;
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 50px;
      }

      .brand-icon {
        width: 50px;
        height: 50px;
        background: white;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }

      .brand-icon svg {
        width: 30px;
        height: 30px;
        fill: #1e40af;
      }

      .brand h1 {
        font-size: 32px;
        font-weight: 700;
        letter-spacing: -0.5px;
      }

      .welcome-content h2 {
        font-size: 48px;
        font-weight: 700;
        line-height: 1.2;
        margin-bottom: 20px;
        letter-spacing: -1px;
      }

      .welcome-content p {
        font-size: 18px;
        line-height: 1.6;
        opacity: 0.95;
        max-width: 500px;
        margin-bottom: 40px;
      }

      .right-section {
        flex: 0 0 480px;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .login-card {
        background: white;
        border-radius: 24px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
        width: 100%;
        overflow: hidden;
      }

      .card-header {
        padding: 40px 40px 30px;
        text-align: center;
        border-bottom: 1px solid #e5e7eb;
      }

      .card-header h3 {
        font-size: 24px;
        color: #111827;
        font-weight: 700;
        margin-bottom: 8px;
      }

      .card-header p {
        color: #6b7280;
        font-size: 15px;
      }

      .teacher-avatar {
        width: 100px;
        height: 100px;
        margin: 0 auto 25px;
        position: relative;
      }

      .avatar-circle {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 8px 24px rgba(59, 130, 246, 0.3);
      }

      .avatar-circle svg {
        width: 55px;
        height: 55px;
        fill: white;
      }

      .status-badge {
        position: absolute;
        bottom: 5px;
        right: 5px;
        width: 24px;
        height: 24px;
        background: #10b981;
        border: 3px solid white;
        border-radius: 50%;
      }

      .card-body {
        padding: 40px;
      }

      .form-group {
        margin-bottom: 24px;
      }

      .form-group label {
        display: block;
        color: #374151;
        font-weight: 600;
        margin-bottom: 10px;
        font-size: 14px;
        letter-spacing: 0.3px;
      }

      .input-container {
        position: relative;
      }

      .input-icon {
        position: absolute;
        left: 16px;
        top: 50%;
        transform: translateY(-50%);
        width: 20px;
        height: 20px;
        fill: #9ca3af;
        pointer-events: none;
      }

      .form-control {
        width: 100%;
        padding: 14px 16px 14px 48px;
        border: 2px solid #e5e7eb;
        border-radius: 12px;
        font-size: 15px;
        font-family: "Inter", sans-serif;
        transition: all 0.3s ease;
        background: #f9fafb;
      }

      .form-control:focus {
        outline: none;
        border-color: #3b82f6;
        background: white;
        box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
      }

      .form-control:focus + .input-icon {
        fill: #3b82f6;
      }

      .password-toggle {
        position: absolute;
        right: 16px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        cursor: pointer;
        padding: 5px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .password-toggle svg {
        width: 20px;
        height: 20px;
        fill: #9ca3af;
        transition: fill 0.3s ease;
      }

      .password-toggle:hover svg {
        fill: #3b82f6;
      }

      .form-options {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 28px;
        margin-top: -8px;
      }

      .remember-me {
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
      }

      .remember-me input[type="checkbox"] {
        width: 18px;
        height: 18px;
        cursor: pointer;
        accent-color: #3b82f6;
      }

      .remember-me label {
        color: #6b7280;
        font-size: 14px;
        cursor: pointer;
        margin: 0;
        font-weight: 500;
      }

      .forgot-link {
        color: #3b82f6;
        text-decoration: none;
        font-size: 14px;
        font-weight: 600;
        transition: color 0.3s ease;
      }

      .forgot-link:hover {
        color: #1e40af;
      }

      .btn-login {
        width: 100%;
        padding: 16px;
        background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 16px rgba(59, 130, 246, 0.3);
        letter-spacing: 0.3px;
      }

      .btn-login:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 24px rgba(59, 130, 246, 0.4);
      }

      .btn-login:active {
        transform: translateY(0);
      }

      .divider {
        display: flex;
        align-items: center;
        margin: 28px 0;
        color: #9ca3af;
        font-size: 14px;
      }

      .divider::before,
      .divider::after {
        content: "";
        flex: 1;
        height: 1px;
        background: #e5e7eb;
      }

      .divider span {
        padding: 0 15px;
      }

      .help-text {
        text-align: center;
        color: #6b7280;
        font-size: 14px;
        margin-top: 20px;
      }

      .help-text a {
        color: #3b82f6;
        text-decoration: none;
        font-weight: 600;
      }

      .help-text a:hover {
        color: #1e40af;
      }

      .alert {
        padding: 14px 16px;
        border-radius: 10px;
        margin-bottom: 20px;
        display: none;
        font-size: 14px;
        font-weight: 500;
      }

      .alert-error {
        background: #fee2e2;
        color: #991b1b;
        border-left: 4px solid #dc2626;
      }

      .alert-success {
        background: #d1fae5;
        color: #065f46;
        border-left: 4px solid #10b981;
      }

      @media (max-width: 1200px) {
        .login-wrapper {
          flex-direction: column;
          gap: 40px;
        }

        .left-section {
          text-align: center;
          padding: 20px;
        }

        .welcome-content h2 {
          font-size: 36px;
        }

        .welcome-content p {
          margin: 0 auto 30px;
        }

        .right-section {
          flex: 0 0 auto;
          width: 100%;
          max-width: 480px;
        }
      }

      @media (max-width: 640px) {
        body::before {
          clip-path: polygon(0 0, 100% 0, 100% 50%, 0 100%);
        }

        .login-wrapper {
          padding: 20px;
        }

        .welcome-content h2 {
          font-size: 28px;
        }

        .card-body {
          padding: 30px 25px;
        }

        .card-header {
          padding: 30px 25px 25px;
        }

        .right-section {
          max-width: 100%;
        }
      }
      .loader-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.6);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
      }

      .loader {
        border: 5px solid #f3f3f3;
        border-top: 5px solid #007bff;
        border-radius: 50%;
        width: 45px;
        height: 45px;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
      /* OTP Modal Styles */
      .modal-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        z-index: 10000;
        align-items: center;
        justify-content: center;
        animation: fadeIn 0.3s ease;
      }

      .modal-overlay.active {
        display: flex;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .otp-modal {
        background: white;
        border-radius: 24px;
        box-shadow: 0 25px 70px rgba(0, 0, 0, 0.3);
        width: 90%;
        max-width: 450px;
        position: relative;
        animation: slideUp 0.3s ease;
      }

      @keyframes slideUp {
        from {
          transform: translateY(50px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .modal-header {
        padding: 30px 30px 20px;
        text-align: center;
        border-bottom: 1px solid #e5e7eb;
        position: relative;
      }

      .modal-close {
        position: absolute;
        top: 20px;
        right: 20px;
        background: #f3f4f6;
        border: none;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }

      .modal-close:hover {
        background: #e5e7eb;
        transform: rotate(90deg);
      }

      .modal-close svg {
        width: 20px;
        height: 20px;
        fill: #6b7280;
      }

      .otp-icon {
        width: 80px;
        height: 80px;
        margin: 0 auto 20px;
        background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 8px 24px rgba(59, 130, 246, 0.3);
      }

      .otp-icon svg {
        width: 40px;
        height: 40px;
        fill: white;
      }

      .modal-header h3 {
        font-size: 24px;
        color: #111827;
        font-weight: 700;
        margin-bottom: 8px;
      }

      .modal-header p {
        color: #6b7280;
        font-size: 14px;
        line-height: 1.5;
      }

      .modal-body {
        padding: 30px;
      }

      .otp-inputs {
        display: flex;
        gap: 12px;
        justify-content: center;
        margin-bottom: 24px;
      }

      .otp-input {
        width: 55px;
        height: 55px;
        text-align: center;
        font-size: 24px;
        font-weight: 600;
        border: 2px solid #e5e7eb;
        border-radius: 12px;
        background: #f9fafb;
        transition: all 0.3s ease;
        font-family: "Inter", sans-serif;
      }

      .otp-input:focus {
        outline: none;
        border-color: #3b82f6;
        background: white;
        box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
      }

      .resend-section {
        text-align: center;
        margin-bottom: 24px;
        color: #6b7280;
        font-size: 14px;
      }

      .resend-section button {
        background: none;
        border: none;
        color: #3b82f6;
        font-weight: 600;
        cursor: pointer;
        text-decoration: underline;
        font-size: 14px;
        font-family: "Inter", sans-serif;
      }

      .resend-section button:hover {
        color: #1e40af;
      }

      .btn-verify {
        width: 100%;
        padding: 16px;
        background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 16px rgba(59, 130, 246, 0.3);
        letter-spacing: 0.3px;
        font-family: "Inter", sans-serif;
      }

      .btn-verify:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 24px rgba(59, 130, 246, 0.4);
      }

      .btn-verify:active {
        transform: translateY(0);
      }

      @media (max-width: 1200px) {
        .login-wrapper {
          flex-direction: column;
          gap: 40px;
        }

        .left-section {
          text-align: center;
          padding: 20px;
        }

        .welcome-content h2 {
          font-size: 36px;
        }

        .welcome-content p {
          margin: 0 auto 30px;
        }

        .right-section {
          flex: 0 0 auto;
          width: 100%;
          max-width: 480px;
        }
      }

      @media (max-width: 640px) {
        body::before {
          clip-path: polygon(0 0, 100% 0, 100% 50%, 0 100%);
        }

        .login-wrapper {
          padding: 20px;
        }

        .welcome-content h2 {
          font-size: 28px;
        }

        .card-body {
          padding: 30px 25px;
        }

        .card-header {
          padding: 30px 25px 25px;
        }

        .right-section {
          max-width: 100%;
        }

        .otp-inputs {
          gap: 8px;
        }

        .otp-input {
          width: 48px;
          height: 48px;
          font-size: 20px;
        }

        .modal-body {
          padding: 25px 20px;
        }
      }
    </style>
  </head>
  <body>
    <div class="login-wrapper">
      <div class="left-section">
        <div class="brand">
            <img src="{{info.website_logo.url}}" alt="" class="brand-icon">
          <h1>{{info.website_name}}</h1>
        </div>

        <div class="welcome-content">
          <h2>Welcome Back, Educator!</h2>
          <p>
            Access your personalized teaching dashboard to manage students,
            track progress, and deliver exceptional education.
          </p>
        </div>
      </div>

      <div class="right-section">
        <div class="login-card">
          <div class="card-header">
            <div class="teacher-avatar">
              <img src="{{info.website_logo.url}}" alt="" class="avatar-circle">
              <div class="status-badge"></div>
            </div>
            <h3>Teacher Panel</h3>
            <p>Sign in to your account</p>
          </div>

          <div class="card-body">
            <div class="alert alert-error" id="errorAlert"></div>
            <div class="alert alert-success" id="successAlert"></div>

            <form
              id="loginForm"
              method="post"
              onsubmit="authentication(this,event)"
            >
              {% csrf_token %}
              <div class="form-group">
                <label for="username">Username</label>
                <div class="input-container">
                  <input
                    type="text"
                    id="username"
                    class="form-control"
                    placeholder="Enter your username"
                    autocomplete="username"
                    name="username"
                    required
                  />
                  <svg
                    class="input-icon"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"
                    />
                  </svg>
                </div>
              </div>

              <div class="form-group">
                <label for="password">Password</label>
                <div class="input-container">
                  <input
                    type="password"
                    id="password"
                    class="form-control"
                    placeholder="Enter your password"
                    autocomplete="current-password"
                    name="password"
                    required
                  />
                  <svg
                    class="input-icon"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"
                    />
                  </svg>
                  <button
                    type="button"
                    class="password-toggle"
                    id="togglePassword"
                  >
                    <svg
                      id="eyeIcon"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"
                      />
                    </svg>
                  </button>
                </div>
              </div>

              <div class="form-options">
                <div class="remember-me">
                  <input type="checkbox" id="rememberMe" />
                  <label for="rememberMe">Remember me</label>
                </div>
                <a href="#" class="forgot-link" id="forgotPassword"
                  >Forgot password?</a
                >
              </div>

              <button type="submit" class="btn-login">Sign In</button>

              <div class="divider">
                <span>Need help?</span>
              </div>

              <div class="help-text">
                Contact <a href="#">Administrator Support</a>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <div id="loader" class="loader-overlay" style="display: none">
      <div class="loader"></div>
    </div>

    <!-- OTP Modal -->
    <div id="otpModal" class="modal-overlay">
      <div class="otp-modal">
        <div class="modal-header">
          <button
            type="button"
            class="modal-close"
            id="closeOtpModal"
            onclick="closeOtpModalFunc()"
          >
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"
              />
            </svg>
          </button>
          <div class="otp-icon">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,5A3,3 0 0,1 15,8A3,3 0 0,1 12,11A3,3 0 0,1 9,8A3,3 0 0,1 12,5M17.13,17C15.92,18.85 14.11,20.24 12,20.92C9.89,20.24 8.08,18.85 6.87,17C6.53,16.5 6.24,16 6,15.47C6,13.82 8.71,12.47 12,12.47C15.29,12.47 18,13.79 18,15.47C17.76,16 17.47,16.5 17.13,17Z"
              />
            </svg>
          </div>
          <h3>OTP Verification</h3>
          <p>Enter the 6-digit code sent to your registered email</p>
        </div>
        <div class="modal-body">
          <form id="otpForm" method="post" onsubmit="otpverify(this,event)">
            {% csrf_token %}
            <div class="otp-input-container">
              <input
                type="text"
                id="otp"
                maxlength="6"
                placeholder="Enter 6-digit OTP"
                pattern="\d{6}"
                required
                name="otp"
                class="otp-input-single"
                style="
                  width: 100%;
                  max-width: 200px;
                  padding: 12px 15px;
                  font-size: 18px;
                  letter-spacing: 8px;
                  border: 2px solid #4caf50;
                  border-radius: 8px;
                  outline: none;
                  transition: 0.3s;
                  text-align: center;
                  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
                "
                onfocus="this.style.borderColor='#2196F3'; this.style.boxShadow='0 2px 8px rgba(33, 150, 243, 0.5)';"
                onblur="this.style.borderColor='#4CAF50'; this.style.boxShadow='0 2px 6px rgba(0,0,0,0.1)';"
              />
            </div>

            <div class="resend-section">
              Didn't receive code?
              <button type="button" id="resendOtp">Try Again</button>
            </div>

            <button type="submit" class="btn-verify">Verify OTP</button>
          </form>
        </div>
      </div>
    </div>

    <script>
      const loginForm = document.getElementById("loginForm");
      const errorAlert = document.getElementById("errorAlert");
      const successAlert = document.getElementById("successAlert");
      const togglePassword = document.getElementById("togglePassword");
      const passwordInput = document.getElementById("password");
      const eyeIcon = document.getElementById("eyeIcon");
      const forgotPassword = document.getElementById("forgotPassword");
      const otpModal = document.getElementById("otpModal");
      const closeOtpModal = document.getElementById("closeOtpModal");
      const otpInputs = document.querySelectorAll(".otp-input");

      // Password visibility toggle
      togglePassword.addEventListener("click", function () {
        const type = passwordInput.type === "password" ? "text" : "password";
        passwordInput.type = type;

        if (type === "text") {
          eyeIcon.innerHTML =
            '<path d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z"/>';
        } else {
          eyeIcon.innerHTML =
            '<path d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"/>';
        }
      });

      function showLoader() {
        document.getElementById("loader").style.display = "flex";
      }

      function hideLoader() {
        document.getElementById("loader").style.display = "none";
      }
      // Form submission
      function authentication(form, e) {
        e.preventDefault();

        const username = document.getElementById("username").value.trim();
        const password = passwordInput.value;

        hideAlerts();

        // Validation
        if (!username || !password) {
          showError("Please fill in all required fields");
          return;
        }

        //if (username.length < 3) {
        //    showError('Username must be at least 3 characters long');
        //    return;
        //}

        if (password.length < 6) {
          showError("Password must be at least 6 characters long");
          return;
        }
        const formdata = new FormData(form);
        const url = "{% url 'login_to' %}";
        showLoader();
        fetch(url, {
          method: "post",
          body: formdata,
          headers: {
            "X-CSRFToken": formdata.get("csrfmiddlewaretoken"),
          },
        })
          .then((res) => res.json())
          .then((data) => {
            if (data.status == "success") {
              hideLoader();
              showSuccess(data.message);
              openOtpModal();
            } else {
              showError(data.message);
            }
          })
          .catch((err) => {
            showError(err);
          });
      }

      function openOtpModal() {
        otpModal.classList.add("active");
        document.body.style.overflow = "hidden";
        // Focus OTP input
        setTimeout(() => {
          document.getElementById("otp").focus();
        }, 100);
      }

      function closeOtpModalFunc() {
        otpModal.classList.remove("active");
        document.body.style.overflow = "auto";
        // Clear OTP inputs
        otpInputs.forEach((input) => {
          input.value = "";
        });
      }
      function otpverify(form, e) {
        e.preventDefault();
        const url = "{% url 'otpverify' %}";
        const formdata = new FormData(form);
        closeOtpModalFunc()
        fetch(url, {
          method: "POST",
          body: formdata,
          headers: {
            "X-CSRFToken": formdata.get("csrfmiddlewaretoken"),
          },
          credentials:"same-origin"
        })
          .then((res) => res.json())
          .then((data) => {
            if (data.status == "success") {
              window.location.href = "/teacher/dashboard/";
            } else {
              showError(data.message);
            }
          })
          .catch((err) => {
            showError(err);
          });
      }
      // Forgot password
      forgotPassword.addEventListener("click", function (e) {
        e.preventDefault();
        showError("Please contact your administrator to reset your password.");
      });

      function showError(message) {
        errorAlert.textContent = message;
        errorAlert.style.display = "block";
        setTimeout(() => {
          errorAlert.style.display = "none";
        }, 5000);
      }

      function showSuccess(message) {
        successAlert.textContent = message;
        successAlert.style.display = "block";
      }

      function hideAlerts() {
        errorAlert.style.display = "none";
        successAlert.style.display = "none";
      }

      // Add smooth focus animations
      document.querySelectorAll(".form-control").forEach((input) => {
        input.addEventListener("focus", function () {
          this.parentElement.querySelector(".input-icon").style.fill =
            "#3b82f6";
        });

        input.addEventListener("blur", function () {
          if (!this.value) {
            this.parentElement.querySelector(".input-icon").style.fill =
              "#9ca3af";
          }
        });
      });
    </script>
  </body>
</html>
